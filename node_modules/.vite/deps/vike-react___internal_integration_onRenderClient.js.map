{
  "version": 3,
  "sources": ["../../react-dom/client.js", "../../vike-react/dist/integration/onRenderClient.js", "../../vike-react/dist/utils/isCallable.js", "../../vike-react/dist/hooks/useConfig/configsCumulative.js", "../../vike-react/dist/utils/includes.js", "../../vike-react/dist/integration/getHeadSetting.js", "../../vike-react/dist/integration/getPageElement.js", "../../vike-react/dist/hooks/usePageContext.js", "../../vike-react/dist/utils/getGlobalObject.js", "../../vike-react/dist/utils/callCumulativeHooks.js", "../../vike-react/dist/integration/applyHeadSettings.js", "../../vike-react/dist/utils/objectEntries.js", "../../vike-react/dist/integration/resolveReactOptions.js"],
  "sourcesContent": ["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n", "// https://vike.dev/onRenderClient\nexport { onRenderClient };\nimport ReactDOM from 'react-dom/client';\nimport { getHeadSetting } from './getHeadSetting.js';\nimport { getPageElement } from './getPageElement.js';\nimport './styles.css';\nimport { callCumulativeHooks } from '../utils/callCumulativeHooks.js';\nimport { applyHeadSettings } from './applyHeadSettings.js';\nimport { resolveReactOptions } from './resolveReactOptions.js';\nlet root;\nconst onRenderClient = async (pageContext) => {\n    pageContext._headAlreadySet = pageContext.isHydration;\n    // Use case:\n    // - Store hydration https://github.com/vikejs/vike-react/issues/110\n    await callCumulativeHooks(pageContext.config.onBeforeRenderClient, pageContext);\n    const { page, renderPromise } = getPageElement(pageContext);\n    pageContext.page = page;\n    // TODO: implement this? So that, upon errors, onRenderClient() throws an error and Vike can render the error page. As of April 2024 it isn't released yet.\n    //  - https://react-dev-git-fork-rickhanlonii-rh-root-options-fbopensource.vercel.app/reference/react-dom/client/createRoot#show-a-dialog-for-uncaught-errors\n    //  - https://react-dev-git-fork-rickhanlonii-rh-root-options-fbopensource.vercel.app/reference/react-dom/client/hydrateRoot#show-a-dialog-for-uncaught-errors\n    const onUncaughtError = (_error, _errorInfo) => { };\n    const container = document.getElementById('root');\n    const { hydrateRootOptions, createRootOptions } = resolveReactOptions(pageContext);\n    if (pageContext.isHydration &&\n        // Whether the page was [Server-Side Rendered](https://vike.dev/ssr).\n        container.innerHTML !== '') {\n        // First render while using SSR, i.e. [hydration](https://vike.dev/hydration)\n        root = ReactDOM.hydrateRoot(container, page, hydrateRootOptions);\n    }\n    else {\n        if (!root) {\n            // First render without SSR\n            root = ReactDOM.createRoot(container, createRootOptions);\n        }\n        root.render(page);\n    }\n    pageContext.root = root;\n    await renderPromise;\n    if (!pageContext.isHydration) {\n        pageContext._headAlreadySet = true;\n        applyHead(pageContext);\n    }\n    // Use cases:\n    // - Custom user settings: https://vike.dev/head-tags#custom-settings\n    // - Testing tools: https://github.com/vikejs/vike-react/issues/95\n    await callCumulativeHooks(pageContext.config.onAfterRenderClient, pageContext);\n};\nfunction applyHead(pageContext) {\n    const title = getHeadSetting('title', pageContext);\n    const lang = getHeadSetting('lang', pageContext);\n    applyHeadSettings(title, lang);\n}\n", "export function isCallable(thing) {\n    return thing instanceof Function || typeof thing === 'function';\n}\n", "export const configsCumulative = ['Head', 'bodyAttributes', 'htmlAttributes'];\n", "// https://stackoverflow.com/questions/56565528/typescript-const-assertions-how-to-use-array-prototype-includes/74213179#74213179\n/** Same as Array.prototype.includes() but with type inference */\nexport function includes(values, x) {\n    return values.includes(x);\n}\n/*\nexport function includes<Arr extends any[] | readonly any[]>(arr: Arr, el: unknown): el is Arr[number] {\n  return arr.includes(el as any)\n}\n*/\n", "export { getHeadSetting };\nimport { isCallable } from '../utils/isCallable.js';\nimport { configsCumulative } from '../hooks/useConfig/configsCumulative.js';\nimport { includes } from '../utils/includes.js';\n// We use `any` instead of doing proper validation in order to save KBs sent to the client-side.\nfunction getHeadSetting(configName, pageContext) {\n    // Set by useConfig()\n    const valFromUseConfig = pageContext._configFromHook?.[configName];\n    // Set by +configName.js\n    const valFromConfig = pageContext.config[configName];\n    const getCallable = (val) => (isCallable(val) ? val(pageContext) : val);\n    if (!includes(configsCumulative, configName)) {\n        if (valFromUseConfig !== undefined)\n            return valFromUseConfig;\n        return getCallable(valFromConfig);\n    }\n    else {\n        return [\n            //\n            ...(valFromConfig ?? []).map(getCallable),\n            ...(valFromUseConfig ?? []),\n        ];\n    }\n}\n", "export { getPageElement };\nimport React, { Suspense, useEffect } from 'react';\nimport { PageContextProvider } from '../hooks/usePageContext.js';\nfunction getPageElement(pageContext) {\n    const { Page, config: { Loading }, } = pageContext;\n    let page = Page ? React.createElement(Page, null) : null;\n    // Wrapping\n    const addSuspense = (el) => {\n        if (!Loading?.layout)\n            return el;\n        return React.createElement(Suspense, { fallback: React.createElement(Loading.layout, null) }, page);\n    };\n    page = addSuspense(page);\n    [\n        // Inner wrapping\n        ...(pageContext.config.Layout || []),\n        // Outer wrapping\n        ...(pageContext.config.Wrapper || []),\n    ].forEach((Wrap) => {\n        page = React.createElement(Wrap, null, page);\n        page = addSuspense(page);\n    });\n    page = React.createElement(PageContextProvider, { pageContext: pageContext }, page);\n    let renderPromiseResolve;\n    let renderPromise = new Promise((r) => (renderPromiseResolve = r));\n    page = React.createElement(RenderPromiseProvider, { renderPromiseResolve: renderPromiseResolve }, page);\n    if (pageContext.config.reactStrictMode !== false) {\n        page = React.createElement(React.StrictMode, null, page);\n    }\n    return { page, renderPromise };\n}\nfunction RenderPromiseProvider({ children, renderPromiseResolve, }) {\n    useEffect(renderPromiseResolve);\n    return children;\n}\n", "export { usePageContext };\nexport { PageContextProvider };\nimport React, { useContext } from 'react';\nimport { getGlobalObject } from '../utils/getGlobalObject.js';\nconst globalObject = getGlobalObject('PageContextProvider.ts', {\n    reactContext: React.createContext(undefined),\n});\nfunction PageContextProvider({ pageContext, children }) {\n    const { reactContext } = globalObject;\n    return React.createElement(reactContext.Provider, { value: pageContext }, children);\n}\n/**\n * Access `pageContext` from any React component.\n *\n * https://vike.dev/usePageContext\n */\nfunction usePageContext() {\n    const { reactContext } = globalObject;\n    const pageContext = useContext(reactContext);\n    return pageContext;\n}\n", "export function getGlobalObject(\n// We use the filename as key; each `getGlobalObject()` call should live inside a file with a unique filename.\nkey, defaultValue) {\n    // @ts-ignore\n    const globalObjectsAll = (globalThis[projectKey] = globalThis[projectKey] || {});\n    const globalObject = (globalObjectsAll[key] = globalObjectsAll[key] || defaultValue);\n    return globalObject;\n}\nconst projectKey = '_vike_react';\n", "export { callCumulativeHooks };\nimport { providePageContext } from 'vike/getPageContext';\nimport { isCallable } from './isCallable.js';\nasync function callCumulativeHooks(values, pageContext) {\n    if (!values)\n        return [];\n    const valuesPromises = values.map((val) => {\n        if (isCallable(val)) {\n            providePageContext(pageContext);\n            // Hook\n            return val(pageContext);\n        }\n        else {\n            // Plain value\n            return val;\n        }\n    });\n    const valuesResolved = await Promise.all(valuesPromises);\n    return valuesResolved;\n}\n", "export { applyHeadSettings };\n// - We skip if `undefined` as we shouldn't remove values set by the Head setting.\n// - Setting a default prevents the previous value to be leaked: upon client-side navigation, the value set by the previous page won't be removed if the next page doesn't override it.\n//   - Most of the time, the user sets a default himself (i.e. a value defined at /pages/+config.js)\n//     - If he doesn't have a default then he can use `null` to opt into Vike's defaults\nfunction applyHeadSettings(title, lang) {\n    if (title !== undefined)\n        document.title = title || '';\n    if (lang !== undefined)\n        document.documentElement.lang = lang || 'en';\n}\n", "// https://stackoverflow.com/questions/60141960/typescript-key-value-relation-preserving-object-entries-type/75337277#75337277\n/** Same as Object.entries() but with type inference */\nexport function objectEntries(obj) {\n    return Object.entries(obj);\n}\n", "export { resolveReactOptions };\nimport { isCallable } from '../utils/isCallable.js';\nimport { objectEntries } from '../utils/objectEntries.js';\nfunction resolveReactOptions(pageContext) {\n    const optionsAcc = {};\n    (pageContext.config.react ?? []).forEach((valUnresolved) => {\n        const optionList = isCallable(valUnresolved) ? valUnresolved(pageContext) : valUnresolved;\n        if (!optionList)\n            return;\n        objectEntries(optionList).forEach(([fnName, options]) => {\n            if (!options)\n                return;\n            optionsAcc[fnName] ?? (optionsAcc[fnName] = {});\n            objectEntries(options).forEach(([key, val]) => {\n                var _a;\n                if (!isCallable(val)) {\n                    // @ts-ignore\n                    (_a = optionsAcc[fnName])[key] ?? (_a[key] = val);\n                }\n                else {\n                    const valPrevious = optionsAcc[fnName][key];\n                    // @ts-ignore\n                    optionsAcc[fnName][key] = (...args) => {\n                        valPrevious?.(...args);\n                        val(...args);\n                    };\n                }\n            });\n        });\n    });\n    return optionsAcc;\n}\n"],
  "mappings": "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",
  "names": ["import_react", "globalObject", "React", "React", "ReactDOM"]
}
